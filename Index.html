<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subir Archivo a Google Drive</title>
  <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
  <h1>Subir PDF a Google Drive</h1>
  <button id="subir">Subir Archivo</button>

  <script>
    const API_KEY = "TU_API_KEY"; // Sustituye por tu clave API
    const CLIENT_ID = "TU_CLIENT_ID"; // Sustituye por tu Client ID
    const SCOPES = "https://www.googleapis.com/auth/drive.file";

    // Evento para el botÃ³n de subir archivo
    document.getElementById("subir").addEventListener("click", () => {
      gapi.load("client:auth2", async () => {
        try {
          // Inicializar cliente de Google API
          await gapi.client.init({
            apiKey: AIzaSyCN7aNmx3uN-LbpOLwn1H1Nx6PCQ-WF0aA,
            clientId: 368818782322-iu35u51di0o5ijc81ke556a9voove119.apps.googleusercontent.com,
            scope: SCOPES,
          });

          // Autenticar usuario
          const authInstance = gapi.auth2.getAuthInstance();
          if (!authInstance.isSignedIn.get()) {
            await authInstance.signIn();
          }

          // Subir archivo a Google Drive
          const fileContent = "Este es un archivo de prueba"; // Contenido del archivo
          const file = new Blob([fileContent], { type: "text/plain" }); // Crear archivo
          const metadata = {
            name: "archivo_prueba.txt",
            mimeType: "text/plain",
          };

          const formData = new FormData();
          formData.append("metadata", new Blob([JSON.stringify(metadata)], { type: "application/json" }));
          formData.append("file", file);

          const response = await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart", {
            method: "POST",
            headers: {
              Authorization: `Bearer ${gapi.auth.getToken().access_token}`,
            },
            body: formData,
          });

          const data = await response.json();
          console.log("Archivo subido:", data);
          alert(`Archivo subido correctamente. Enlace: https://drive.google.com/file/d/${data.id}`);
        } catch (error) {
          console.error("Error:", error);
          alert("Hubo un error al subir el archivo.");
        }
      });
    });
  </script>
</body>
</html>
